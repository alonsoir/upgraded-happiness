/*
   CSS Debug para el mapa del dashboard
   Añadir a static/css/dashboard.css o crear archivo separado
*/

/* 🗺️ DEBUG: Forzar visibilidad del mapa */
#map-container, .map-container, [id*="map"], [class*="map"] {
    visibility: visible !important;
    display: block !important;
    opacity: 1 !important;
    z-index: 1000 !important;
    background-color: #1a1a1a !important;
    border: 2px solid #00ff00 !important; /* Verde para debug */
    min-height: 400px !important;
    min-width: 600px !important;
}

/* 🌍 Leaflet map específico */
.leaflet-container {
    visibility: visible !important;
    display: block !important;
    opacity: 1 !important;
    background-color: #2d3748 !important;
    border: 2px solid #00ff00 !important;
    min-height: 400px !important;
}

/* 🎯 Marcadores del mapa */
.leaflet-marker-icon, .marker, [class*="marker"] {
    visibility: visible !important;
    display: block !important;
    opacity: 1 !important;
    z-index: 1001 !important;
}

/* 🔍 Debug general para elementos invisibles */
[style*="display: none"], [style*="visibility: hidden"], [style*="opacity: 0"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background-color: rgba(255, 0, 0, 0.1) !important; /* Fondo rojo debug */
}

/* 📱 Responsive para el mapa */
@media (max-width: 768px) {
    #map-container, .map-container {
        min-height: 300px !important;
        min-width: 100% !important;
    }
}

/* 🎨 Estilo del contenedor principal del mapa */
.map-section, .geography-section, .location-section {
    background-color: #1a202c !important;
    border: 1px solid #4a5568 !important;
    border-radius: 8px !important;
    padding: 16px !important;
    margin: 8px 0 !important;
    min-height: 450px !important;
}

/* 🌐 Estilo específico para Leaflet tiles */
.leaflet-tile {
    opacity: 1 !important;
}

.leaflet-control {
    visibility: visible !important;
    opacity: 1 !important;
}

/* 📍 Estilos para popups del mapa */
.leaflet-popup {
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 1002 !important;
}

/* 🔧 Debug: Mostrar todos los div que pueden contener el mapa */
div[id*="map"]:empty::before {
    content: "🗺️ MAPA CONTAINER VACÍO - ID: " attr(id);
    color: #ff6b6b;
    font-weight: bold;
    display: block;
    padding: 10px;
    background-color: rgba(255, 0, 0, 0.1);
    border: 2px dashed #ff6b6b;
}

/* 🎯 Forzar carga de CSS de Leaflet si no está */
@import url('https://unpkg.com/leaflet@1.7.1/dist/leaflet.css');

/* 🔍 Debug: Resaltar elementos con clase relacionada al mapa */
[class*="geo"], [class*="location"], [class*="coordinate"] {
    border: 1px solid #00ff00 !important;
    background-color: rgba(0, 255, 0, 0.05) !important;
}

/* 🌟 Forzar estilos para elementos que podrían estar ocultos */
.hidden, .d-none, .invisible {
    display: block !important;
    visibility: visible !important;
    opacity: 0.7 !important;
    background-color: rgba(255, 255, 0, 0.1) !important;
}

/* 📊 Estilo para el contenedor de métricas geográficas */
.geographic-metrics, .location-stats {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 10px !important;
    margin-top: 10px !important;
}

/* 🎪 Debug: Mostrar estructura del DOM relacionada con mapas */
*[data-map], *[data-geo], *[data-location] {
    outline: 2px solid #ff00ff !important;
    outline-offset: 2px;
}

/* 🚨 Alert visual para elementos de mapa sin contenido */
[id*="map"]:empty, [class*="map"]:empty {
    min-height: 200px !important;
    background: repeating-linear-gradient(
        45deg,
        #ff6b6b20,
        #ff6b6b20 10px,
        #ffffff20 10px,
        #ffffff20 20px
    ) !important;
}

[id*="map"]:empty::after {
    content: "⚠️ CONTENEDOR DE MAPA VACÍO ⚠️";
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #ff6b6b;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
}